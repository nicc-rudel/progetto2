<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <link rel="icon" href="img/Logo_piccolo.png" type="image/jpeg">
    <title>LuxuryWood | Pavimenti d'Eccellenza</title>
    <meta name="description" content="LuxuryWood √® un'azienda specializzata nella posa e restauro di pavimenti in legno di pregio.">

    <!-- Preload Immagine Hero per caricamento immediato -->
    <link rel="preload" as="image" href="img/corridoio_spina_di_pesce.jpeg">

    <!-- Font Eleganti (Google Fonts) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Lato:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Icone -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Librerie Esterne -->
    <!-- PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- EMAILJS (Nuova Libreria per invio email diretto) -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <style>
        /* --- 1. VARIABILI & RESET --- */
        :root {
            --col-primary: #2C2C2C;       /* Nero Antracite */
            --col-accent: #C49A6C;        /* Oro Legno */
            --col-accent-hover: #A67C52;  /* Oro Scuro */
            --col-bg: #F9F7F2;            /* Bianco Crema (Carta) */
            --col-white: #FFFFFF;
            --col-light-gray: #E5E5E5;
            
            --font-title: 'Playfair Display', serif;
            --font-body: 'Lato', sans-serif;
            
            --nav-mobile-height: 65px; 
            --header-desktop-height: 80px;
        }

        * { box-sizing: border-box; outline: none; }
        
        html { scroll-behavior: smooth; }

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-body);
            background-color: var(--col-bg);
            color: var(--col-primary);
            line-height: 1.6;
            /* FIX IOS: Aumenta il padding bottom per compensare la nav bar pi√π alta */
            padding-bottom: calc(var(--nav-mobile-height) + env(safe-area-inset-bottom)); 
            overflow-x: hidden; 
        }

        @media (min-width: 1024px) {
            body { padding-bottom: 0; }
        }

        h1, h2, h3 { font-family: var(--font-title); margin-top: 0; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; padding: 0; margin: 0; }
        img { max-width: 100%; display: block; }
        
        img[alt]:after {  
            display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #f0f0f0; content: attr(alt);
            display: flex; align-items: center; justify-content: center;
            color: #888; font-weight: bold; border: 1px dashed #ccc;
        }

        .container {
            width: 90%; max-width: 1200px; margin: 0 auto;
        }

        /* --- ANIMAZIONI SCROLL REVEAL --- */
        .reveal {
            opacity: 0; transform: translateY(50px); transition: all 0.8s ease-out;
        }
        .reveal.active {
            opacity: 1; transform: translateY(0);
        }

        /* --- 2. HEADER (DESKTOP) --- */
        header {
            position: sticky; top: 0; z-index: 1000;
            background-color: var(--col-white);
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            height: var(--header-desktop-height);
            display: flex; align-items: center;
            transition: height 0.3s ease;
        }
        header.scrolled { height: 60px; }

        header .container {
            display: flex; justify-content: space-between; align-items: center; height: 100%; width: 100%;
        }

        .logo {
            height: 300px; width: auto; object-fit: contain;
            filter: drop-shadow(0px 4px 6px rgba(0, 0, 0, 0.3));
        }
        
        .logo-text-fallback {
            font-family: var(--font-title); color: var(--col-accent);
            font-size: 24px; font-weight: bold; margin: 0; display: none;
        }

        .desktop-menu { display: flex; gap: 20px; } /* Ridotto gap da 30px a 20px */
        .desktop-menu li a {
            font-size: 15px; text-transform: uppercase; letter-spacing: 1px;
            font-weight: 600; color: var(--col-primary); position: relative; padding-bottom: 5px;
            white-space: nowrap; /* Impedisce al testo di andare a capo */
        }
        .desktop-menu li a::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 2px;
            background-color: var(--col-accent); transition: 0.3s;
        }
        .desktop-menu li a:hover::after { width: 100%; }

        .header-contacts { display: flex; align-items: center; gap: 15px; }
        .btn-contact-header {
            background-color: var(--col-primary); color: var(--col-white);
            padding: 8px 18px; border-radius: 30px; font-size: 14px; font-weight: 700;
            display: flex; align-items: center; gap: 8px;
            white-space: nowrap; /* Impedisce al testo di andare a capo */
        }
        .btn-contact-header:hover { background-color: var(--col-accent); color: white; }

        .mobile-hidden { display: none; }
        @media (min-width: 1024px) {
            .mobile-visible { display: none; }
            .mobile-hidden { display: flex; }
        }
        @media (max-width: 1023px) {
            .desktop-menu, .header-contacts { display: none; }
            header { justify-content: center; }
            header .container { justify-content: center; }
        }

        /* --- 3. MOBILE BOTTOM NAVIGATION --- */
        .mobile-bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; 
            /* FIX IOS: Altezza dinamica che somma l'altezza standard (65px) alla Safe Area */
            height: calc(var(--nav-mobile-height) + env(safe-area-inset-bottom));
            
            background-color: var(--col-white); box-shadow: 0 -4px 15px rgba(0,0,0,0.1); 
            z-index: 2000; display: flex; justify-content: space-around; align-items: center;
            border-top: 1px solid #e0e0e0; 
            
            /* Il padding bottom spinge il contenuto (le icone) verso l'alto, sopra la barra nera di iOS */
            padding-bottom: env(safe-area-inset-bottom);
        }
        @media (min-width: 1024px) { .mobile-bottom-nav { display: none; } }

        .nav-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-size: 10px; font-weight: 500; color: #666; flex: 1; height: 100%;
            transition: color 0.2s, background-color 0.2s; padding-top: 5px;
        }
        .nav-item i { font-size: 20px; margin-bottom: 4px; transition: transform 0.2s; }
        .nav-item.active { color: var(--col-accent); font-weight: 700; }
        
        /* FIX IOS: L'effetto hover si attiva solo se il dispositivo supporta l'hover (mouse) */
        @media (hover: hover) {
            .nav-item:hover { color: var(--col-accent); background-color: #f9f9f9; }
        }
        
        .nav-item.active i { transform: translateY(-3px); }

        /* --- 4. SEZIONI GENERALI --- */
        section { padding: 60px 0; scroll-margin-top: 100px; }
        section h2 {
            font-size: 2.5rem; text-align: center; margin-bottom: 40px;
            color: var(--col-primary); position: relative; padding-bottom: 15px;
        }
        section h2::after {
            content: ""; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 60px; height: 3px; background-color: var(--col-accent);
        }

        /* ALTERNANZA SFONDI MIGLIORATA */
        .services { background-color: var(--col-white); }
        .about { background-color: var(--col-bg); }
        .photo { background-color: var(--col-white); } /* Bianca */
        .blog-section { background-color: var(--col-bg); } /* Crema */
        .preventivo { background-color: var(--col-white); } /* Bianca */
        .contact { background-color: var(--col-primary); color: white; }
        
        .contact h2 { color: white; }
        .contact h2::after { background-color: white; }

        /* --- 5. SLIDER SERVIZI --- */
        .slider-container {
            position: relative; width: 100%; max-width: 900px; margin: 0 auto;
            overflow: hidden; border-radius: 12px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1); background: #eee;
        }
        .slider { display: flex; }
        .slide { min-width: 100%; position: relative; }
        .slide img { width: 100%; height: 500px; object-fit: cover; }
        @media (max-width: 768px) { .slide img { height: 300px; } }

        .slide-overlay {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: white; padding: 30px; padding-top: 80px; text-align: center;
        }
        .open-modal {
            background: var(--col-accent); color: white; border: none; padding: 10px 25px;
            border-radius: 50px; font-weight: 700; cursor: pointer; margin-top: 10px; transition: transform 0.2s;
        }
        .open-modal:hover { transform: scale(1.05); background: var(--col-accent-hover); }

        .nav-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            background: rgba(255,255,255,0.2); backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.5); color: white; width: 45px; height: 45px;
            border-radius: 50%; cursor: pointer; z-index: 10;
            display: flex; align-items: center; justify-content: center; transition: 0.3s;
        }
        .nav-btn:hover { background: var(--col-accent); border-color: var(--col-accent); }
        #prevSlide { left: 15px; }
        #nextSlide { right: 15px; }

        .dots-container { display: flex; justify-content: center; gap: 10px; margin-top: 20px; }
        .dot { width: 10px; height: 10px; background: #ccc; border-radius: 50%; cursor: pointer; transition: 0.3s; }
        .dot.active { background: var(--col-accent); transform: scale(1.3); }
        .progress-bar-container { height: 3px; background: #e0e0e0; width: 200px; margin: 10px auto; border-radius: 2px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--col-accent); width: 0; }

        /* --- 6. MODALI (Generico) --- */
        .modal-info {
            display: none; position: fixed; z-index: 3000;
            left: 0; top: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(3px);
            align-items: center; justify-content: center; padding: 20px;
        }
        .modal-info-content {
            background: white; padding: 40px; border-radius: 8px;
            max-width: 600px; width: 100%; position: relative;
            text-align: left; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            max-height: 90vh; overflow-y: auto; /* Scroll se testo lungo */
        }
        .close-modal-info {
            position: absolute; top: 15px; right: 20px;
            font-size: 28px; cursor: pointer; color: #888;
        }
        .modal-info-content h3 { color: var(--col-accent); margin-bottom: 15px; font-size: 24px;}
        .modal-info-content p { color: #555; margin-bottom: 15px; }

        /* --- 7. BLOG / MAGAZINE STYLES --- */
        .blog-grid {
            display: grid; /* Sar√† nascosto di default via inline-style o JS */
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            /* Animazione quando appare */
            animation: fadeInGrid 0.5s ease-out;
        }

        .blog-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .blog-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }

        .blog-img-container {
            height: 200px;
            overflow: hidden;
            position: relative;
        }

        .blog-img-container img {
            width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s ease;
        }
        .blog-card:hover .blog-img-container img { transform: scale(1.1); }

        .blog-content { padding: 25px; display: flex; flex-direction: column; flex-grow: 1; }
        .blog-date { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: #999; margin-bottom: 10px; }
        .blog-title { font-family: var(--font-title); font-size: 20px; color: var(--col-primary); margin-bottom: 15px; line-height: 1.3; }
        .blog-excerpt { font-size: 15px; color: #666; margin-bottom: 20px; flex-grow: 1; }
        
        .blog-btn-link {
            color: var(--col-accent); font-weight: 700; text-transform: uppercase;
            font-size: 13px; letter-spacing: 1px; border: none; background: none;
            cursor: pointer; padding: 0; text-align: left; align-self: flex-start;
        }
        .blog-btn-link:hover { color: var(--col-primary); text-decoration: underline; }
        
        .blog-text-full p { margin-bottom: 1em; line-height: 1.8; }
        .blog-text-full strong { color: var(--col-primary); }

        /* Bottone Show/Hide Blog */
        #toggleBlogBtn {
            background-color: transparent;
            color: var(--col-primary);
            border: 2px solid var(--col-primary);
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 14px;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        #toggleBlogBtn:hover {
            background-color: var(--col-primary);
            color: white;
        }


        /* --- 8. GALLERIA & FILTRI --- */
        #filterContainer {
            display: flex; justify-content: center; gap: 15px; margin-bottom: 40px; flex-wrap: wrap;
        }
        .filter-btn {
            padding: 10px 25px; border: 1px solid #ccc; border-radius: 30px;
            background: transparent; color: var(--col-primary);
            font-family: var(--font-body); font-size: 14px; font-weight: 600;
            cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px;
        }
        @media (hover: hover) {
            .filter-btn:hover { border-color: var(--col-accent); color: var(--col-accent); }
        }
        .filter-btn.active {
            background-color: var(--col-accent); border-color: var(--col-accent);
            color: white; box-shadow: 0 5px 15px rgba(196, 154, 108, 0.3);
        }

        .photo-gallery {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px;
        }

        /* GESTIONE FOTO SU MOBILE */
        @media (max-width: 1024px) {
            .photo-gallery.awaiting-mobile-interaction .custom-image { display: none !important; }
            .photo-gallery.awaiting-mobile-interaction::before {
                content: "üëÜ Tocca un filtro per aprire le foto.\A Tocca di nuovo per chiudere.";
                white-space: pre-wrap; display: block; grid-column: 1 / -1; text-align: center;
                width: 100%; padding: 15px 10px; color: #888; font-size: 14px; font-style: italic;
                background-color: #f5f5f5; border-radius: 8px; border: 1px dashed #ccc; line-height: 1.6;
            }
        }

        .custom-image {
            width: 100%; height: 280px; object-fit: cover; border-radius: 8px; cursor: pointer;
            transition: transform 0.6s ease, filter 0.3s ease, opacity 0.4s ease;
            background: #e5e5e5; position: relative; animation: fadeInGrid 0.5s ease-out;
        }
        @keyframes fadeInGrid { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .custom-image:hover { transform: scale(1.03); filter: brightness(1.1); box-shadow: 0 15px 30px rgba(0,0,0,0.2); z-index: 10; }

        /* --- 9. LIGHTBOX --- */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes zoomIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .lightbox {
            display: none; position: fixed; z-index: 4000;
            left: 0; top: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.92); backdrop-filter: blur(8px);
            align-items: center; justify-content: center;
        }
        .lightbox.active { display: flex; animation: fadeIn 0.4s ease-out; }
        .lightbox-img {
            max-width: 90%; max-height: 85vh; border: 1px solid rgba(255,255,255,0.1);
            border-radius: 4px; box-shadow: 0 25px 50px rgba(0,0,0,0.6);
            object-fit: contain; background: #111; animation: zoomIn 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        }
        .lightbox-close {
            position: absolute; top: 30px; right: 40px; color: rgba(255,255,255,0.6);
            font-size: 50px; font-weight: 300; cursor: pointer; transition: all 0.3s; z-index: 4001; line-height: 1;
        }
        .lightbox-close:hover { color: var(--col-accent); transform: rotate(90deg); }
        .lightbox-prev, .lightbox-next {
            position: absolute; top: 50%; transform: translateY(-50%);
            background: rgba(255,255,255,0.2); backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.5); color: white;
            width: 50px; height: 50px; border-radius: 50%; cursor: pointer; z-index: 4001;
            display: flex; align-items: center; justify-content: center; transition: 0.3s; font-size: 20px;
        }
        .lightbox-prev:hover, .lightbox-next:hover {
            background: var(--col-accent); border-color: var(--col-accent); transform: translateY(-50%) scale(1.1);
        }
        .lightbox-prev { left: 30px; }
        .lightbox-next { right: 30px; }

        /* --- 10. PREVENTIVO --- */
        .simulator-container {
            background: white; padding: 40px; border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); margin-top: 30px;
        }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 8px; font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px; color: #666; }
        input, select, textarea {
            width: 100%; padding: 14px; border: 1px solid #ddd;
            border-radius: 6px; font-size: 16px; font-family: var(--font-body); transition: border-color 0.3s;
        }
        input:focus, select:focus, textarea:focus { border-color: var(--col-accent); }
        .form-columns { display: flex; flex-wrap: wrap; gap: 40px; }
        .form-column { flex: 1; min-width: 300px; }
        button {
            background: var(--col-primary); color: white;
            border: none; padding: 15px 40px; border-radius: 50px;
            font-size: 16px; font-weight: 700; cursor: pointer;
            transition: 0.3s; display: inline-block;
        }
        button:hover { background: var(--col-accent); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(196, 154, 108, 0.4); }
        .result-container {
            margin-top: 30px; padding: 30px; background: #FDFBF7;
            border: 1px solid var(--col-accent); border-radius: 8px; display: none;
        }
        .total-price { font-family: var(--font-title); font-size: 2rem; color: var(--col-accent); font-weight: 700; }

        /* --- 11. CONTATTI & FOOTER --- */
        .contact-list li { margin-bottom: 15px; font-size: 18px; display: flex; align-items: center; gap: 10px; }
        .contact-social { margin-top: 30px; font-size: 30px; display: flex; gap: 20px; }
        .contact-social a:hover { color: var(--col-accent); }
        footer {
            background-color: #1a1a1a; color: #777; text-align: center; padding: 30px 0; font-size: 14px;
        }
        @media(max-width: 1023px) { footer { padding-bottom: 90px; } }

        /* --- 12. ELEMENTI FLOTTANTI --- */
        .whatsapp-float {
            position: fixed; 
            /* FIX IOS: Bottom calcolato con safe area */
            bottom: calc(90px + env(safe-area-inset-bottom)); 
            right: 20px;
            width: 60px; height: 60px; background: #25D366;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 1500; transition: 0.3s;
        }
        .whatsapp-float img { width: 35px; }
        .whatsapp-float:hover { transform: scale(1.1); }
        
        @media(min-width: 1024px) { 
            .whatsapp-float { bottom: 30px; } 
        }

        /* --- BACK TO TOP BUTTON --- */
        .back-to-top {
            position: fixed; 
            /* FIX IOS: Bottom calcolato con safe area (90+60+10 = 160) */
            bottom: calc(160px + env(safe-area-inset-bottom));
            right: 20px; 
            width: 50px; height: 50px; background: var(--col-primary);
            color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 1499;
            opacity: 0; pointer-events: none; transition: 0.3s;
            font-size: 20px; text-decoration: none;
        }
        .back-to-top.show { opacity: 1; pointer-events: all; }
        .back-to-top:hover { background: var(--col-accent); transform: translateY(-3px); }

        @media (min-width: 1024px) {
            .back-to-top { bottom: 100px; /* Desktop position above WhatsApp (30+60+10) */ }
        }

        .cookie-banner {
            position: fixed; 
            bottom: calc(90px + env(safe-area-inset-bottom)); 
            left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 380px;
            /* NUOVO STILE: Glassmorphism scuro e bordi arrotondati */
            background: rgba(44, 44, 44, 0.95); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: white; 
            padding: 20px 25px; 
            border-radius: 16px; 
            text-align: center;
            z-index: 5000; 
            display: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
            border: 1px solid rgba(255,255,255,0.1);
            animation: slideUpFade 0.5s ease-out forwards;
        }

        @keyframes slideUpFade {
            from { opacity: 0; transform: translate(-50%, 20px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }

        @media(min-width: 1024px) { 
            .cookie-banner { bottom: 30px; } 
        }
        
        .cookie-btn { 
            background: var(--col-accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(196, 154, 108, 0.3);
            width: 100%;
        }
        .cookie-btn:hover {
            background: var(--col-accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(196, 154, 108, 0.4);
        }

    </style>
</head>

<body>

    <!-- Cookie Banner (Info No Tracking) - STILE MIGLIORATO -->
    <div id="cookieBanner" class="cookie-banner">
        <div style="font-size: 24px; margin-bottom: 10px; color: var(--col-accent);">
            <i class="fas fa-user-shield"></i>
        </div>
        <p style="margin-bottom:20px; font-size:14px; line-height: 1.5; color: #eee;">
            <strong>Privacy First.</strong><br>
            Questo sito non utilizza cookie di tracciamento e rispetta la tua privacy.
        </p>
        <button class="cookie-btn" id="acceptCookies">Ho capito</button>
    </div>

    <!-- HEADER DESKTOP -->
    <header>
        <div class="container">
            <!-- Logo (Gestione Errore Immagine) -->
            <a href="#">
                <img src="img/Logo_grande_senzasfondo.png" alt="LuxuryWood Logo" class="logo" id="headerLogo">
                <h2 class="logo-text-fallback" id="headerLogoText">LuxuryWood</h2>
            </a>

            <!-- Navigazione Desktop -->
            <div class="mobile-hidden" style="align-items: center; gap: 25px;">
                <ul class="desktop-menu">
                    <li><a href="#servizi">Servizi</a></li>
                    <li><a href="#chi-siamo">Chi Siamo</a></li>
                    <li><a href="#foto-lavori">Lavori</a></li>
                    <li><a href="#blog">Blog</a></li> <!-- Spostato dopo Lavori -->
                    <li><a href="#preventivo">Preventivo</a></li>
                    <li><a href="#contatti">Contatti</a></li>
                </ul>
                <div class="header-contacts">
                    <a href="tel:+393248985320" class="btn-contact-header"><i class="fas fa-phone"></i>+39 324 898 5320</a>
                </div>
            </div>
        </div>
    </header>

    <!-- MENU MOBILE BOTTOM (App Style) -->
    <nav class="mobile-bottom-nav">
        <!-- RIMOSSO IL TASTO HOME -->
        <a href="#servizi" class="nav-item">
            <i class="fas fa-tools"></i>
            <span>Servizi</span>
        </a>
        <a href="#foto-lavori" class="nav-item">
            <i class="fas fa-images"></i>
            <span>Foto</span>
        </a>
        <a href="#blog" class="nav-item"> <!-- Spostato dopo Foto -->
            <i class="fas fa-newspaper"></i>
            <span>Blog</span>
        </a>
        <a href="#preventivo" class="nav-item">
            <i class="fas fa-calculator"></i>
            <span>Prev.</span>
        </a>
        <a href="#contatti" class="nav-item">
            <i class="fas fa-envelope"></i>
            <span>Contatti</span>
        </a>
    </nav>

    <!-- SERVIZI (Slider) -->
    <section id="servizi" class="services">
        <div class="container">
            <h2 class="reveal">I Nostri Servizi</h2>
            <div class="slider-container reveal">
                <div class="slider">
                    <!-- Slides -->
                    <div class="slide">
                        <img src="img/corridoio_spina_di_pesce.jpeg" alt="Pavimento Spina" fetchpriority="high">
                        <div class="slide-overlay">
                            <h3>Pavimento a spina di pesce</h3>
                            <button class="open-modal" data-modal="modal1">Dettagli</button>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="img/parete_camera.jpeg" alt="Pareti Legno" loading="lazy">
                        <div class="slide-overlay">
                            <h3>Realizzazioni pareti</h3>
                            <button class="open-modal" data-modal="modal2">Dettagli</button>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="img/restauro3.jpeg" alt="Restauro" loading="lazy">
                        <div class="slide-overlay">
                            <h3>Restauro pavimenti</h3>
                            <button class="open-modal" data-modal="modal3">Dettagli</button>
                        </div>
                    </div>
                    <div class="slide">
                        <img src="img/spc_pavimento.jpeg" alt="SPC" loading="lazy">
                        <div class="slide-overlay">
                            <h3>SPC</h3>
                            <button class="open-modal" data-modal="modal4">Dettagli</button>
                        </div>
                    </div>
                </div>
                <!-- Controlli -->
                <div id="prevSlide" class="nav-btn"><i class="fas fa-chevron-left"></i></div>
                <div id="nextSlide" class="nav-btn"><i class="fas fa-chevron-right"></i></div>
            </div>
            
            <div class="dots-container">
                <span class="dot active" data-slide="0"></span>
                <span class="dot" data-slide="1"></span>
                <span class="dot" data-slide="2"></span>
                <span class="dot" data-slide="3"></span>
            </div>
            <div class="progress-bar-container"><div class="progress-bar"></div></div>
        </div>
    </section>

    <!-- Modali Informativi Servizi -->
    <div id="modal1" class="modal-info">
        <div class="modal-info-content">
            <span class="close-modal-info">&times;</span>
            <h3><i class="fas fa-layer-group"></i> Spina di Pesce</h3>
            <p>La posa a spina di pesce non √® un semplice rivestimento, ma un vero e 
                proprio elemento di design capace di definire la personalit√† di un ambiente. 
                La sua geometria distintiva crea un dialogo continuo con la luce naturale: 
                grazie al diverso orientamento dei listelli, il legno acquista tridimensionalit√† 
                e movimento, regalando alla stanza una percezione di maggiore ampiezza e respiro. 
                √à un classico dell'architettura che unisce dinamismo e prestigio. Realizziamo questa
                posa con rigore sartoriale, curando ogni allineamento per offrire non solo un pavimento, 
                ma un‚Äôopera di stile destinata a superare ogni moda.</p>
        </div>
    </div>
    <div id="modal2" class="modal-info">
        <div class="modal-info-content">
            <span class="close-modal-info">&times;</span>
            <h3><i class="fas fa-border-all"></i> Pareti in Legno</h3>
            <p>Rivestire una parete in legno significa trasformare una semplice superficie muraria
                in una scenografia naturale che avvolge e riscalda l‚Äôambiente. √à una scelta di carattere 
                che cambia radicalmente la percezione della stanza, donando una sensazione di intimit√† e 
                protezione che l'intonaco o la carta da parati non possono eguagliare. Oltre al forte impatto 
                estetico, una parete in legno offre un comfort abitativo superiore: migliora l'isolamento acustico, 
                attutisce i rumori e regola naturalmente l'umidit√†. Che si tratti di creare una continuit√† fluida 
                con il pavimento o un contrasto materico deciso, realizziamo il rivestimento come un abito su misura, 
                curando ogni giunzione per garantire una superficie perfetta alla vista e al tatto.</p>
        </div>
    </div>
    <div id="modal3" class="modal-info">
        <div class="modal-info-content">
            <span class="close-modal-info">&times;</span>
            <h3><i class="fas fa-magic"></i> Restauro</h3>
            <p>Un pavimento in legno vissuto possiede un fascino inimitabile, un carattere scritto nelle venature e 
                nelle sfumature che solo il tempo sa regalare. Il nostro intervento di restauro non √® una semplice 
                cancellazione dei segni di usura, ma una vera e propria opera di rinascita: lavoriamo per rimuovere 
                la patina opaca del passato e svelare la bellezza autentica che ancora vive nella fibra, rispettando 
                profondamente l'identit√† originale del materiale.
                Attraverso una levigatura calibrata e l'applicazione di finiture protettive di ultima generazione, 
                restituiamo al parquet la sua luminosit√† e la sua resistenza, esaltandone i contrasti naturali. </p>
        </div>
    </div>
    <div id="modal4" class="modal-info">
        <div class="modal-info-content">
            <span class="close-modal-info">&times;</span>
            <h3><i class="fas fa-fill-drip"></i>SPC</h3>
            <p>Il pavimento in SPC rappresenta la nuova frontiera delle superfici tecniche: un materiale di ultima 
                generazione che unisce la bellezza estetica del legno alla robustezza della pietra. Grazie al suo 
                nucleo minerale rigido, garantisce una stabilit√† dimensionale e una resistenza all'usura senza precedenti.
                √à la soluzione ideale per chi cerca praticit√† senza rinunciare al design: essendo impermeabile al 100%, 
                permette di avere l'effetto legno anche in ambienti umidi come bagni e cucine. Inoltre, il suo spessore 
                ridotto lo rende perfetto per le ristrutturazioni, consentendo la posa in sovrapposizione senza dover 
                demolire il pavimento esistente. Anche per l'SPC, manteniamo la nostra filosofia di eccellenza: selezioniamo 
                solo prodotti da fornitori certificati, caratterizzati da texture iper-realistiche al tatto e sistemi di 
                incastro precisi, per garantire un risultato estetico e funzionale di altissimo livello.</p>
        </div>
    </div>

    <!-- CHI SIAMO -->
    <section id="chi-siamo" class="about">
        <div class="container">
            <h2 class="reveal">Chi Siamo</h2>
            <div class="reveal" style="max-width: 800px; margin: 0 auto; text-align: center;">
                <p style="font-size: 18px; margin-bottom: 30px;">
                 Con oltre 20 anni di esperienza, noi di <strong>LuxuryWood</strong> siamo il punto di riferimento per la realizzazione di 
                 pavimenti in legno di alta gamma. La nostra azienda coniuga la cura maniacale dell'approccio artigianale con la massima 
                professionalit√† gestionale.
                Il nostro standard qualitativo nasce all'origine: collaboriamo esclusivamente con fornitori di eccellenza per selezionare 
                materiali di pregio ed essenze nobili garantite. Seguiamo ogni cliente con una consulenza tecnica dedicata, dalla scelta 
                iniziale fino alla posa finale. Il risultato √® un servizio puntuale, pulito e di qualit√† superiore.
                </p>
                <div style="text-align: left; display: inline-block;">
                    <ul style="font-size: 16px; line-height: 2;">
                        <li><i class="fas fa-check" style="color: var(--col-accent); margin-right: 10px;"></i> Posa qualificata di Parquet, SPC e Resine</li>
                        <li><i class="fas fa-check" style="color: var(--col-accent); margin-right: 10px;"></i> Restauro conservativo pavimenti antichi</li>
                        <li><i class="fas fa-check" style="color: var(--col-accent); margin-right: 10px;"></i> Consulenza design e finiture su misura</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- FOTO LAVORI (Con Lightbox Desktop/Mobile) -->
    <section id="foto-lavori" class="photo">
        <div class="container">
            <h2 class="reveal">Galleria Realizzazioni</h2>
            
            <!-- NUOVO FILTRO A PULSANTI -->
            <div id="filterContainer" class="reveal">
                <!-- Nota: Ho aggiunto active di default nel codice ma lo rimuover√≤ via JS su mobile -->
                <button class="filter-btn active" data-filter="tutte">Tutti</button>
                <button class="filter-btn" data-filter="interni">Interni & Design</button>
                <button class="filter-btn" data-filter="restauri">Restauri</button>
            </div>

            <!-- Aggiunta classe per logica mobile -->
            <div class="photo-gallery awaiting-mobile-interaction">
                <!-- Cliccando si apre il Lightbox. Ho aggiunto la classe reveal ad ogni immagine -->
                <img src="img/interno.jpeg" alt="Living Moderno" data-category="interni tutte" class="custom-image reveal" onclick="openLightbox(0)" loading="lazy">
                <img src="img/spinadipesce1.jpeg" alt="Dettaglio Spina" data-category="interni tutte" class="custom-image reveal" onclick="openLightbox(1)" loading="lazy">
                <img src="img/corridoio_spina_di_pesce.jpeg" alt="Corridoio a spina" data-category="interni tutte" class="custom-image reveal" onclick="openLightbox(2)" loading="lazy">
                <img src="img/ufficio.jpeg" alt="Ufficio Direzionale" data-category="interni tutte" class="custom-image reveal" onclick="openLightbox(3)" loading="lazy">
                <img src="img/parete_camera.jpeg" alt="Parete Boiserie" data-category="interni tutte" class="custom-image reveal" onclick="openLightbox(4)" loading="lazy">
                <img src="img/bagno.jpeg" alt="Bagno in Legno" data-category="interni tutte" class="custom-image reveal" onclick="openLightbox(5)" loading="lazy">
                <img src="img/restauro2.jpeg" alt="Restauro Villa" data-category="restauri tutte" class="custom-image reveal" onclick="openLightbox(6)" loading="lazy">
                <img src="img/restauro.jpeg" alt="Dettaglio Restauro" data-category="restauri tutte" class="custom-image reveal" onclick="openLightbox(7)" loading="lazy">
            </div>
        </div>
    </section>

    <!-- NUOVA SEZIONE BLOG / MAGAZINE (CON TOGGLE) - SPOSTATA QUI -->
    <section id="blog" class="blog-section">
        <div class="container">
            <h2 class="reveal">Magazine & Consigli</h2>
            
            <!-- Pulsante per Mostrare/Nascondere il Blog -->
            <div class="reveal" style="text-align: center; margin-bottom: 40px;">
                <button id="toggleBlogBtn">
                    Apri Magazine <i class="fas fa-chevron-down" style="margin-left: 8px;"></i>
                </button>
            </div>

            <!-- Griglia Nascosta di Default -->
            <div class="blog-grid" id="blogGrid" style="display: none;">
                
                <!-- Articolo 1: Protezione -->
                <article class="blog-card">
                    <div class="blog-img-container">
                        <img src="img/interno.jpeg" alt="Pulizia Parquet" loading="lazy">
                    </div>
                    <div class="blog-content">
                        <span class="blog-date">Manutenzione</span>
                        <h3 class="blog-title">Scudo Naturale: Come proteggere il tuo parquet</h3>
                        <p class="blog-excerpt">Pochi semplici gesti quotidiani per mantenere intatta la bellezza del legno contro i suoi peggiori nemici.</p>
                        <button class="blog-btn-link open-modal" data-modal="modal-blog-1">Leggi l'articolo <i class="fas fa-arrow-right"></i></button>
                    </div>
                </article>

                <!-- Articolo 2: Restauro -->
                <article class="blog-card">
                    <div class="blog-img-container">
                        <img src="img/restauro2.jpeg" alt="Fasi Restauro" loading="lazy">
                    </div>
                    <div class="blog-content">
                        <span class="blog-date">Restauro</span>
                        <h3 class="blog-title">L'Arte della Rinascita: Come avviene un restauro</h3>
                        <p class="blog-excerpt">Dalla levigatura alla finitura: il processo tecnico che trasforma un pavimento usurato in un'opera d'arte.</p>
                        <button class="blog-btn-link open-modal" data-modal="modal-blog-2">Leggi l'articolo <i class="fas fa-arrow-right"></i></button>
                    </div>
                </article>

                <!-- Articolo 3: Finiture -->
                <article class="blog-card">
                    <div class="blog-img-container">
                        <img src="img/spinadipesce1.jpeg" alt="Finitura Olio vs Vernice" loading="lazy">
                    </div>
                    <div class="blog-content">
                        <span class="blog-date">Guida alla Scelta</span>
                        <h3 class="blog-title">Il Dilemma della Finitura: Olio o Vernice?</h3>
                        <p class="blog-excerpt">Estetica naturale o massima protezione? Una guida completa per scegliere la soluzione adatta al tuo stile di vita.</p>
                        <button class="blog-btn-link open-modal" data-modal="modal-blog-3">Leggi l'articolo <i class="fas fa-arrow-right"></i></button>
                    </div>
                </article>

                <!-- Articolo 4: Bagno (Nuovo) -->
                <article class="blog-card">
                    <div class="blog-img-container">
                        <img src="img/bagno.jpeg" alt="Parquet in Bagno" loading="lazy">
                    </div>
                    <div class="blog-content">
                        <span class="blog-date">Design & Tecnica</span>
                        <h3 class="blog-title">Legno in Bagno? Sfatare i Miti</h3>
                        <p class="blog-excerpt">Non rinunciare all'eleganza. Scopri come il parquet pu√≤ trasformare il tuo bagno in una spa privata, senza rischi.</p>
                        <button class="blog-btn-link open-modal" data-modal="modal-blog-4">Leggi l'articolo <i class="fas fa-arrow-right"></i></button>
                    </div>
                </article>

            </div>
        </div>
    </section>

    <!-- MODALI BLOG (Contenuto Completo) -->
    <!-- Modale Articolo 1 -->
    <div id="modal-blog-1" class="modal-info">
        <div class="modal-info-content">
            <span class="close-modal-info">&times;</span>
            <h3>Come proteggere il parquet</h3>
            <div class="blog-text-full">
                <p>Il parquet √® un materiale vivo, capace di durare generazioni se trattato con il giusto rispetto. Spesso si teme che sia troppo delicato, ma la verit√† √® che bastano poche attenzioni per mantenerlo splendido.</p>
                <p><strong>1. I Nemici invisibili: Acqua e Sabbia</strong><br>
                L'acqua stagnante √® il nemico numero uno: penetra nelle fibre causando rigonfiamenti. Quando lavi il pavimento, usa sempre uno straccio solo <em>umido</em>, mai bagnato, e ben strizzato. La sabbia e i sassolini, invece, agiscono come carta vetrata sotto le scarpe. Posiziona sempre uno zerbino di qualit√† all'ingresso.</p>
                <p><strong>2. Il Detergente Giusto</strong><br>
                Evita candeggina, alcol o detergenti aggressivi da supermercato che "sgrassano" troppo, togliendo nutrimento al legno. Usa solo detergenti neutri specifici per parquet, che puliscono delicatamente rispettando la finitura.</p>
                <p><strong>3. Feltri e Clima</strong><br>
                Applica feltrini sotto tutte le sedie e i mobili pesanti per evitare graffi da trascinamento. Inoltre, tieni d'occhio l'umidit√† di casa: il legno sta bene dove stiamo bene noi, idealmente tra il 45% e il 60% di umidit√† relativa.</p>
            </div>
        </div>
    </div>

    <!-- Modale Articolo 2 -->
    <div id="modal-blog-2" class="modal-info">
        <div class="modal-info-content">
            <span class="close-modal-info">&times;</span>
            <h3>Come avviene un restauro</h3>
            <div class="blog-text-full">
                <p>Vedere un vecchio pavimento tornare nuovo √® sempre un'emozione. Ma cosa succede esattamente durante i nostri interventi? Il processo √® meticoloso e richiede macchinari professionali.</p>
                <p><strong>Fase 1: La Sgrossatura</strong><br>
                Utilizziamo macchine levigatrici a nastro per rimuovere completamente la vecchia vernice e lo strato superficiale di legno danneggiato. Grazie ai nostri sistemi di aspirazione moderni, questa fase √® ormai quasi del tutto priva di polvere nell'aria.</p>
                <p><strong>Fase 2: La Stuccatura</strong><br>
                Raccogliamo la polvere finissima del legno stesso creata durante la levigatura e la mescoliamo con una resina legante. Questo impasto viene spatolato su tutta la superficie per chiudere fessure e pori, garantendo un colore identico al resto del pavimento.</p>
                <p><strong>Fase 3: Carteggiatura Fine e Finitura</strong><br>
                Passiamo carte abrasive sempre pi√π fini per rendere la superficie liscia come la seta. Infine, applichiamo la finitura scelta (olio o vernice) in pi√π mani, proteggendo il lavoro e donando al legno la sua nuova veste.</p>
            </div>
        </div>
    </div>

    <!-- Modale Articolo 3 -->
    <div id="modal-blog-3" class="modal-info">
        <div class="modal-info-content">
            <span class="close-modal-info">&times;</span>
            <h3>Per quale finitura optare</h3>
            <div class="blog-text-full">
                <p>Questa √® la domanda che ci viene posta pi√π spesso. Non esiste una risposta assoluta, ma esiste la scelta giusta per il <em>tuo</em> stile di vita.</p>
                <p><strong>La Vernice: Praticit√† e Resistenza</strong><br>
                Le vernici moderne (spesso all'acqua, quindi ecologiche) creano un film protettivo sopra il legno. <br>
                <em>Vantaggi:</em> Altissima resistenza ai graffi e ai liquidi, richiede pochissima manutenzione.<br>
                <em>Svantaggi:</em> L'aspetto √® leggermente meno "materico" e, se si graffia profondamente, √® difficile fare un ritocco locale (spesso serve rilevigare tutto).</p>
                <p><strong>L'Olio: Naturalezza e Calore</strong><br>
                L'olio impregna le fibre del legno senza creare pellicole superficiali. Al tatto senti il vero legno.<br>
                <em>Vantaggi:</em> Estetica impareggiabile, i piccoli graffi si mascherano facilmente e si pu√≤ ripristinare una zona rovinata senza dover rifare tutta la stanza.<br>
                <em>Svantaggi:</em> Richiede pi√π cura. Va nutrito periodicamente con prodotti specifici per non farlo seccare.</p>
                <p><strong>Il Consiglio di LuxuryWood</strong><br>
                Se hai animali domestici o bambini piccoli che rovesciano spesso liquidi, la vernice offre pi√π tranquillit√†. Se cerchi l'eleganza assoluta e sei disposto a dedicare qualche attenzione in pi√π alla casa, l'olio √® insuperabile.</p>
            </div>
        </div>
    </div>

    <!-- Modale Articolo 4 (Nuovo) -->
    <div id="modal-blog-4" class="modal-info">
        <div class="modal-info-content">
            <span class="close-modal-info">&times;</span>
            <h3>Legno in Bagno: I Miti da Sfatare</h3>
            <div class="blog-text-full">
                <p>Molti clienti sognano un bagno caldo ed accogliente, ma rinunciano al parquet per paura dell'umidit√†. √à un errore: il legno pu√≤ vivere felicemente in bagno, se si rispettano alcune regole d'oro.</p>
                <p><strong>La scelta dell'Essenza</strong><br>
                Non tutti i legni sono uguali. Per il bagno consigliamo essenze stabili che non temono l'umidit√†, come il <strong>Teak</strong>, l'Iroko o il Doussi√©. Anche il Rovere, se trattato correttamente, √® un'ottima scelta.</p>
                <p><strong>Umidit√† vs Acqua Stagnante</strong><br>
                Il legno respira e si adatta all'umidit√† dell'aria (anzi, la regola!). Il vero pericolo √® l'acqua che rimane a terra per ore. Basta avere l'accortezza di asciugare le pozzanghere dopo la doccia e arieggiare la stanza per far uscire il vapore eccessivo.</p>
                <p><strong>La Finitura Consigliata</strong><br>
                In bagno, suggeriamo quasi sempre una finitura a <strong>vernice</strong>. Sigilla i pori del legno impedendo all'acqua di penetrare in profondit√†, rendendo il pavimento molto pi√π facile da gestire rispetto a un pavimento oliato.</p>
                <p>Il risultato? Un comfort termico unico (niente pi√π piedi gelati al mattino) e un'estetica da spa di lusso.</p>
            </div>
        </div>
    </div>

    <!-- LIGHTBOX (Zoom Immagini) -->
    <div id="lightbox" class="lightbox">
        <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
        <div class="lightbox-prev" onclick="changeLightboxImage(-1)"><i class="fas fa-chevron-left"></i></div>
        <img src="" alt="Zoom" class="lightbox-img" id="lightboxImg">
        <div class="lightbox-next" onclick="changeLightboxImage(1)"><i class="fas fa-chevron-right"></i></div>
    </div>

    <!-- PREVENTIVO -->
    <section id="preventivo" class="preventivo">
        <div class="container">
            <h2 class="reveal">Richiedi Preventivo</h2>
            <!-- TESTO AGGIORNATO (Rimosso riferimento al configuratore) -->
            <p class="reveal" style="text-align: center; margin-bottom: 30px;">Contattaci per un sopralluogo gratuito.</p>

            <!-- Form Contatto Rapido -->
            <form id="contactForm" class="reveal" style="max-width: 600px; margin: 0 auto 40px auto;">
                <div class="form-group">
                    <input type="text" id="name" placeholder="Nome e Cognome">
                </div>
                <div class="form-group">
                    <input type="email" id="email" placeholder="Indirizzo Email">
                </div>
                <div class="form-group">
                    <textarea id="message" rows="4" placeholder="Descrivi la tua richiesta..."></textarea>
                </div>
                <div style="text-align: center;">
                    <button type="button" id="sendEmailBtn">INVIA MESSAGGIO</button>
                </div>
            </form>

            <!-- SEZIONE SIMULATORE NASCOSTA (display: none) -->
            <div class="reveal" style="text-align: center; display: none;">
                <p style="font-size: 14px; color: #888; margin-bottom: 15px;">Oppure prova il nostro calcolatore automatico:</p>
                <button id="showQuoteBtn" style="background-color: var(--col-white); color: var(--col-primary); border: 2px solid var(--col-primary);">
                    <i class="fas fa-calculator"></i> Apri Simulatore
                </button>
            </div>

            <!-- Simulatore (Nascosto di default) -->
            <div class="simulator-container" id="quoteForm" style="display:none;">
                <form>
                    <div class="form-columns">
                        <div class="form-column">
                            <div class="form-group">
                                <label>Essenza Legno</label>
                                <select id="woodType">
                                    <option value="">Seleziona...</option>
                                    <option value="rovere">Rovere (‚Ç¨45/m¬≤)</option>
                                    <option value="noce">Noce (‚Ç¨60/m¬≤)</option>
                                    <option value="teak">Teak (‚Ç¨75/m¬≤)</option>
                                    <option value="custom">Altro</option>
                                </select>
                            </div>
                            <div class="form-group" id="customPriceGroup" style="display:none;">
                                <label>Prezzo Personalizzato (‚Ç¨/m¬≤)</label>
                                <input type="number" id="customPrice">
                            </div>
                            <div class="form-group">
                                <label>Superficie (m¬≤)</label>
                                <input type="number" id="surface">
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label>Tipo di Posa</label>
                                <select id="installationType">
                                    <option value="flottante">Flottante (‚Ç¨15/m¬≤)</option>
                                    <option value="incollata">Incollata (‚Ç¨25/m¬≤)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Localit√† Intervento</label>
                                <select id="location">
                                    <option value="urbano">Urbano (Standard)</option>
                                    <option value="extraurbano">Extraurbano (+‚Ç¨50)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Accessori</label>
                                <select id="accessories" multiple style="height: 85px;">
                                    <option value="battiscopa">Battiscopa Legno</option>
                                    <option value="soglia">Soglia Raccordo</option>
                                </select>
                                <small style="display:block; margin-top:5px; color:#999; font-size:12px;">(Ctrl+Click per selezione multipla)</small>
                            </div>
                        </div>
                    </div>
                    <div style="text-align:center; margin-top:30px;">
                        <button type="button" id="calculateBtn">CALCOLA STIMA</button>
                    </div>
                </form>

                <div class="result-container" id="resultContainer">
                    <h3>Dettaglio Stima</h3>
                    <div id="priceBreakdown" style="margin-bottom: 20px; line-height: 1.8;"></div>
                    <div class="total-price" id="totalPrice"></div>
                    <div style="margin-top:25px; display: flex; gap: 15px; justify-content: center;">
                        <button id="resetBtn" style="background:#999; font-size: 14px;">Reset</button>
                        <button id="downloadPdfBtn" style="background: var(--col-accent); font-size: 14px;"><i class="fas fa-file-pdf"></i> Scarica PDF</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CONTATTI -->
    <section id="contatti" class="contact">
        <div class="container">
            <h2 class="reveal">Contatti</h2>
            <div class="reveal" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 40px; text-align: left;">
                <div>
                    <h3>Email</h3>
                    <ul class="contact-list">
                        <li><i class="fas fa-envelope"></i> luxurywoodpavimenti@gmail.com</li>
                        <li><i class="fas fa-envelope"></i> luxurywood@upapec.it</li>
                    </ul>
                </div>
                <div>
                    <h3>Telefono</h3>
                    <ul class="contact-list">
                        <li><i class="fas fa-phone"></i> Agostino: 324 898 5320</li>
                        <li><i class="fas fa-phone"></i> Niccol√≤: 392 385 0100</li>
                    </ul>
                </div>
            </div>
            <div class="contact-social reveal" style="justify-content: center;">
                <a href="https://instagram.com/luxury_wood" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="https://facebook.com/luxurywood" target="_blank"><i class="fab fa-facebook"></i></a>
            </div>
        </div>
    </section>

    <footer>
        <p>¬© 2025 LuxuryWood - Pavimenti d'autore - P.IVA 05325610284</p>
    </footer>

    <!-- Whatsapp Float -->
    <a href="https://wa.me/393248985320" target="_blank" class="whatsapp-float">
        <img src="img/whatsapp-2.png" alt="WhatsApp" class="whatsapp-icon" 
             onerror="this.style.display='none'; this.parentElement.innerHTML='<i class=\'fab fa-whatsapp\' style=\'color:white; font-size:35px;\'></i>'" loading="lazy">
    </a>

    <!-- Back To Top Button -->
    <a href="#" id="backToTop" class="back-to-top" title="Torna su">
        <i class="fas fa-arrow-up"></i>
    </a>

    <!-- SCRIPT JS UNIFICATO -->
    <script>
        // --- GESTIONE ERRORE LOGO (Safe Fallback) ---
        const logoImg = document.getElementById("headerLogo");
        logoImg.onerror = function() {
            this.style.display = "none";
            document.getElementById("headerLogoText").style.display = "block";
        };

        // --- EMAILJS CONFIGURAZIONE (INIZIALIZZAZIONE) ---
        (function() {
            // TODO: Inserisci qui la tua PUBLIC KEY di EmailJS
            // La trovi su https://dashboard.emailjs.com/admin/account > Public Key
            emailjs.init({
                publicKey: "oTmjg__Crf0rG7j9n", // <--- SOSTITUISCI QUESTO
            });
        })();

        // --- 1. INFO BANNER LOGIC (NO TRACKING - 5 SECONDI) ---
        document.addEventListener("DOMContentLoaded", () => {
            const banner = document.getElementById("cookieBanner");
            
            // Mostra il banner
            banner.style.display = "block";

            // Funzione per nascondere il banner
            const hideBanner = () => {
                banner.style.transition = "opacity 0.5s ease";
                banner.style.opacity = "0";
                setTimeout(() => { banner.style.display = "none"; }, 500);
            };

            // Chiudi al click su OK
            document.getElementById("acceptCookies").addEventListener("click", hideBanner);

            // Chiudi automaticamente dopo 5 secondi
            setTimeout(hideBanner, 5000);
        });

        // --- 2. HEADER SCROLL EFFECT ---
        window.addEventListener("scroll", () => {
            const header = document.querySelector("header");
            if (window.scrollY > 50) header.classList.add("scrolled");
            else header.classList.remove("scrolled");
        });

        // --- 3. MOBILE NAVIGATION ACTIVE STATE ---
        const sections = document.querySelectorAll("section");
        const navItems = document.querySelectorAll(".nav-item");

        window.addEventListener("scroll", () => {
            let current = "";
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= (sectionTop - 150)) {
                    current = section.getAttribute("id");
                }
            });

            navItems.forEach(li => {
                li.classList.remove("active");
                if (li.getAttribute("href").includes(current)) {
                    li.classList.add("active");
                }
            });
        });

        // --- 4. SLIDER SERVIZI & PROGRESS BAR LOGIC ---
        const slider = document.querySelector(".slider");
        const slides = document.querySelectorAll(".slide");
        const dots = document.querySelectorAll(".dot");
        let slideIndex = 0;
        const totalSlides = slides.length;
        let slideTimer = null;

        // Funzione dedicata SOLO al reset della barra visiva
        function resetProgressBar() {
            const bar = document.querySelector(".progress-bar");
            // Rimuoviamo la transizione per reset istantaneo a 0
            bar.style.transition = 'none';
            bar.style.width = '0%';
            // Dopo un micro-ritardo, reimpostiamo la transizione per farla crescere
            setTimeout(() => {
                bar.style.transition = 'width 4s linear';
                bar.style.width = '100%';
            }, 50);
        }

        function updateSlider() {
            slider.style.transform = `translateX(-${slideIndex * 100}%)`;
            dots.forEach((dot, idx) => {
                dot.classList.toggle("active", idx === slideIndex);
            });
            // Quando lo slider cambia automaticamente, resettiamo la barra
            resetProgressBar(); 
        }

        function nextSlide() {
            slideIndex = (slideIndex + 1) % totalSlides;
            updateSlider();
        }

        function prevSlide() {
            slideIndex = (slideIndex - 1 + totalSlides) % totalSlides;
            updateSlider();
        }

        // Avvia il timer e sincronizza la barra
        function startTimer() {
            if (!slideTimer) {
                slideTimer = setInterval(nextSlide, 4000);
            }
        }

        // Ferma il timer
        function stopTimer() {
            if (slideTimer) {
                clearInterval(slideTimer);
                slideTimer = null;
            }
        }

        // Gestione Click Manuale (Next/Prev)
        document.getElementById("nextSlide").addEventListener("click", () => {
            nextSlide(); 
            // Reset manuale del timer per evitare sovrapposizioni
            stopTimer();
            startTimer();
        });
        document.getElementById("prevSlide").addEventListener("click", () => {
            prevSlide(); 
            stopTimer();
            startTimer();
        });

        // Dot click
        dots.forEach((dot, idx) => {
            dot.addEventListener("click", () => {
                slideIndex = idx;
                updateSlider();
                stopTimer();
                startTimer();
            });
        });

        // Avvio iniziale (Reset barra + Start Timer)
        resetProgressBar();
        startTimer();


        // --- 5. MODALI SERVIZI & BLOG & PAUSA CAROSELLO ---
        const modalInfoList = document.querySelectorAll(".modal-info");
        // Seleziona anche i nuovi bottoni del blog (che hanno la stessa classe open-modal)
        document.querySelectorAll(".open-modal").forEach(btn => {
            btn.addEventListener("click", (e) => {
                const id = e.target.dataset.modal;
                document.getElementById(id).style.display = "flex";
                // FERMA TUTTO quando apro il modale
                stopTimer(); 
            });
        });

        document.querySelectorAll(".close-modal-info").forEach(closeBtn => {
            closeBtn.addEventListener("click", (e) => {
                e.target.closest(".modal-info").style.display = "none";
                // QUANDO CHIUDO: Resetta la barra visiva e fai ripartire il timer INSIEME
                resetProgressBar();
                startTimer(); 
            });
        });

        window.onclick = function(event) {
            if (event.target.classList.contains('modal-info')) {
                event.target.style.display = "none";
                // QUANDO CHIUDO (clic fuori): Resetta barra e timer
                resetProgressBar();
                startTimer();
            }
        }

        // --- 5B. NUOVA LOGICA: TOGGLE BLOG ---
        const toggleBlogBtn = document.getElementById("toggleBlogBtn");
        const blogGrid = document.getElementById("blogGrid");

        toggleBlogBtn.addEventListener("click", () => {
            if (blogGrid.style.display === "none") {
                // APRI
                blogGrid.style.display = "grid";
                toggleBlogBtn.innerHTML = 'Chiudi Magazine <i class="fas fa-chevron-up" style="margin-left: 8px;"></i>';
            } else {
                // CHIUDI
                blogGrid.style.display = "none";
                toggleBlogBtn.innerHTML = 'Apri Magazine <i class="fas fa-chevron-down" style="margin-left: 8px;"></i>';
                // Opzionale: scrolla leggermente in su per non perdere il focus
                document.getElementById("blog").scrollIntoView({behavior: "smooth", block: "start"});
            }
        });


        // --- 6. FILTRO GALLERIA (Pulsanti + Logica Mobile) ---
        const filterBtns = document.querySelectorAll(".filter-btn");
        const allImages = document.querySelectorAll(".custom-image");
        const galleryContainer = document.querySelector('.photo-gallery');
        const isMobile = window.innerWidth <= 1024; // Controllo dimensione schermo

        // Se siamo su mobile, rimuovi l'active da "Tutti" inizialmente
        if (isMobile) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        } else {
            // Su desktop rimuovi la classe di attesa per mostrare subito tutto
            galleryContainer.classList.remove('awaiting-mobile-interaction');
        }
        
        filterBtns.forEach(btn => {
            btn.addEventListener("click", () => {
                const isMobileNow = window.innerWidth <= 1024;
                
                // LOGICA MOBILE: TOGGLE
                // Se clicco un bottone GIA' attivo su mobile -> Deseleziona tutto e nascondi
                if (isMobileNow && btn.classList.contains('active')) {
                    btn.classList.remove("active");
                    galleryContainer.classList.add('awaiting-mobile-interaction');
                    return; // Esci, abbiamo finito
                }

                // LOGICA STANDARD (O NUOVA SELEZIONE SU MOBILE)
                // Rimuovi classe active da tutti
                filterBtns.forEach(b => b.classList.remove("active"));
                // Aggiungi a quello cliccato
                btn.classList.add("active");

                // Se era in stato di attesa, rimuovilo per mostrare le foto
                if (galleryContainer.classList.contains('awaiting-mobile-interaction')) {
                    galleryContainer.classList.remove('awaiting-mobile-interaction');
                }
                
                const cat = btn.getAttribute("data-filter");
                
                allImages.forEach(img => {
                    const categories = img.dataset.category.split(" ");
                    if (cat === "tutte" || categories.includes(cat)) {
                        // Semplice show
                        img.style.display = "block";
                        // Piccola animazione fade-in riattivata
                        img.style.animation = 'none';
                        img.offsetHeight; /* trigger reflow */
                        img.style.animation = 'fadeInGrid 0.5s ease-out';
                    } else {
                        img.style.display = "none";
                    }
                });
            });
        });

        // --- 7. LIGHTBOX (ZOOM) ---
        const lightbox = document.getElementById("lightbox");
        const lightboxImg = document.getElementById("lightboxImg");
        let lightboxIndex = 0;
        // Convert NodeList to Array for easy indexing
        const imagesArray = Array.from(allImages);

        function openLightbox(index) {
            // Check visibility if filtered (optional refinement)
            if (imagesArray[index].style.display === 'none') return;
            
            lightboxIndex = index;
            lightboxImg.src = imagesArray[index].src;
            lightbox.classList.add("active");
            
            // Handle keyboard navigation
            document.addEventListener('keydown', handleLightboxKeys);
        }

        function closeLightbox() {
            lightbox.classList.remove("active");
            document.removeEventListener('keydown', handleLightboxKeys);
        }

        function changeLightboxImage(direction) {
            let newIndex = lightboxIndex + direction;
            
            // Loop logic
            if (newIndex >= imagesArray.length) newIndex = 0;
            if (newIndex < 0) newIndex = imagesArray.length - 1;
            
            // Skip hidden images (if filtered)
            let attempts = 0;
            while (imagesArray[newIndex].style.display === 'none' && attempts < imagesArray.length) {
                newIndex += direction;
                if (newIndex >= imagesArray.length) newIndex = 0;
                if (newIndex < 0) newIndex = imagesArray.length - 1;
                attempts++;
            }
            
            lightboxIndex = newIndex;
            lightboxImg.src = imagesArray[lightboxIndex].src;
        }

        function handleLightboxKeys(e) {
            if (e.key === "ArrowRight") changeLightboxImage(1);
            if (e.key === "ArrowLeft") changeLightboxImage(-1);
            if (e.key === "Escape") closeLightbox();
        }

        // Close on background click
        lightbox.addEventListener("click", (e) => {
            if (e.target === lightbox) closeLightbox();
        });


        // --- 8. CALCOLATORE PREVENTIVO ---
        const quoteBtn = document.getElementById("showQuoteBtn");
        const quoteForm = document.getElementById("quoteForm");
        
        quoteBtn.addEventListener("click", () => {
            quoteForm.style.display = (quoteForm.style.display === "block") ? "none" : "block";
            quoteBtn.innerHTML = (quoteForm.style.display === "block") 
                ? '<i class="fas fa-times"></i> Chiudi Simulatore' 
                : '<i class="fas fa-calculator"></i> Apri Simulatore';
        });

        document.getElementById("woodType").addEventListener("change", function() {
            document.getElementById("customPriceGroup").style.display = 
                (this.value === "custom") ? "block" : "none";
        });

        document.getElementById("calculateBtn").addEventListener("click", () => {
            const woodVal = document.getElementById("woodType").value;
            const surface = parseFloat(document.getElementById("surface").value);
            
            if (!woodVal || !surface) {
                alert("Seleziona il tipo di legno e inserisci la superficie.");
                return;
            }

            let pricePerSqm = 0;
            if (woodVal === "custom") {
                pricePerSqm = parseFloat(document.getElementById("customPrice").value) || 0;
            } else {
                const prices = { rovere: 45, noce: 60, teak: 75 };
                pricePerSqm = prices[woodVal] || 0;
            }

            const installVal = document.getElementById("installationType").value;
            const installPrice = (installVal === "incollata") ? 25 : 15;
            
            const locVal = document.getElementById("location").value;
            const locPrice = (locVal === "extraurbano") ? 50 : 0;

            // Accessori
            const accessories = Array.from(document.getElementById("accessories").selectedOptions);
            let accPrice = 0;
            let accNames = [];
            
            accessories.forEach(opt => {
                if (opt.value === "battiscopa") {
                    // Stima perimetro: radice quadrata area * 4 * costo metro
                    const perimeter = Math.sqrt(surface) * 4;
                    accPrice += perimeter * 10; 
                    accNames.push("Battiscopa");
                }
                if (opt.value === "soglia") {
                    accPrice += 25;
                    accNames.push("Soglia");
                }
            });

            const materialTotal = pricePerSqm * surface;
            const laborTotal = installPrice * surface;
            const grandTotal = materialTotal + laborTotal + locPrice + accPrice;

            document.getElementById("resultContainer").style.display = "block";
            document.getElementById("totalPrice").innerText = "Totale Stimato: ‚Ç¨ " + grandTotal.toFixed(2);
            document.getElementById("priceBreakdown").innerHTML = `
                <strong>Materiale (${woodVal}):</strong> ‚Ç¨${materialTotal.toFixed(2)}<br>
                <strong>Manodopera (${installVal}):</strong> ‚Ç¨${laborTotal.toFixed(2)}<br>
                <strong>Trasferta:</strong> ‚Ç¨${locPrice.toFixed(2)}<br>
                <strong>Accessori (${accNames.join(", ") || "Nessuno"}):</strong> ‚Ç¨${accPrice.toFixed(2)}
            `;
        });

        document.getElementById("resetBtn").addEventListener("click", () => {
            document.querySelector("#quoteForm form").reset();
            document.getElementById("resultContainer").style.display = "none";
            document.getElementById("customPriceGroup").style.display = "none";
        });

        // --- 9. INVIO EMAIL CON EMAILJS (AGGIORNATO) ---
        document.getElementById("sendEmailBtn").addEventListener("click", function() {
            // Salva riferimento al bottone e testo originale per feedback
            const btn = this;
            const originalText = btn.innerText;

            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const message = document.getElementById("message").value;

            // Validazione base
            if (!name || !email || !message) { 
                alert("Per favore, compila tutti i campi (Nome, Email e Messaggio)."); 
                return; 
            }

            // Mostra stato di caricamento
            btn.innerText = "Invio in corso...";
            btn.disabled = true;
            btn.style.opacity = "0.7";

            // Parametri che verranno passati al template di EmailJS
            // Assicurati che nel template EmailJS tu abbia impostato {{from_name}}, {{from_email}}, {{message}}
            const templateParams = {
                // Inviamo variabili con nomi multipli per sicurezza (dipende da come hai impostato il template)
                from_name: name,
                name: name, // Alcuni template usano solo {{name}}
                
                from_email: email,
                email: email, // Alcuni template usano solo {{email}}
                reply_to: email, // Fondamentale per fare "Rispondi" dalla tua mail
                
                message: message
            };

            // --- INVIO ---
            // TODO: Sostituisci SERVICE_ID e TEMPLATE_ID con i tuoi reali
            // Trovi il SERVICE ID in "Email Services" e il TEMPLATE ID in "Email Templates"
            emailjs.send('service_bl8u6bf', 'template_bwzkd8v', templateParams)
                .then(function(response) {
                   console.log('SUCCESS!', response.status, response.text);
                   
                   // 1. Feedback Visuale: Cambia testo e colore bottone
                   btn.innerHTML = '<i class="fas fa-check"></i> Messaggio Inviato!';
                   btn.style.backgroundColor = "#4CAF50"; // Verde successo
                   btn.style.color = "white"; // Testo bianco
                   
                   // 2. Resetta il form
                   document.getElementById("contactForm").reset();

                   // 3. Dopo 4 secondi, ripristina il bottone originale
                   setTimeout(function() {
                       btn.innerHTML = originalText;
                       btn.style.backgroundColor = ""; // Torna al colore originale
                       btn.style.color = ""; // Torna al colore originale
                       btn.disabled = false;
                       btn.style.opacity = "1";
                   }, 4000);

                }, function(error) {
                   console.error('FAILED...', error);
                   alert('Errore nell\'invio. Riprova pi√π tardi.');
                   
                   // Ripristina subito in caso di errore
                   btn.innerText = originalText;
                   btn.disabled = false;
                   btn.style.opacity = "1";
                });
        });

        document.getElementById("downloadPdfBtn").addEventListener("click", () => {
            if (!window.jspdf) { alert("Errore caricamento libreria PDF."); return; }
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFont("helvetica", "bold");
            doc.setFontSize(22);
            doc.setTextColor(196, 154, 108); // Color Oro
            doc.text("LUXURY WOOD - Preventivo", 20, 20);
            
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            doc.setFont("helvetica", "normal");
            
            const details = document.getElementById("priceBreakdown").innerText;
            const total = document.getElementById("totalPrice").innerText;
            
            doc.text(details, 20, 40);
            
            doc.setFont("helvetica", "bold");
            doc.setFontSize(16);
            doc.text(total, 20, 100);
            
            doc.setFontSize(10);
            doc.setTextColor(100);
            doc.text("Questo documento √® una stima non vincolante.", 20, 120);
            
            doc.save("Preventivo_LuxuryWood.pdf");
        });

        // --- 10. SCROLL REVEAL (ANIMAZIONI SCROLL) ---
        // Funzione per animare gli elementi quando entrano nella viewport
        const observerOptions = {
            threshold: 0.15, // Scatta quando il 15% dell'elemento √® visibile
            rootMargin: "0px 0px -50px 0px"
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                } else {
                    // RIMUOVE la classe active quando l'elemento esce dallo schermo
                    // permettendo all'animazione di ripetersi quando si rientra.
                    entry.target.classList.remove('active');
                }
            });
        }, observerOptions);

        // Seleziona tutti gli elementi con classe 'reveal'
        document.querySelectorAll('.reveal').forEach(el => {
            observer.observe(el);
        });

        // --- 11. FIX MOBILE NAVIGATION (Buggata/Ricaricamento) ---
        // Intercettiamo i click sul menu in basso per evitare reload e gestire lo scroll fluido
        document.querySelectorAll('.mobile-bottom-nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault(); // BLOCCA il ricaricamento della pagina

                const targetId = this.getAttribute('href');

                // Caso 1: Tasto Home (href="#") -> Torna in cima
                if (targetId === '#') {
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                } 
                // Caso 2: Altri link (href="#id")
                else {
                    const targetSection = document.querySelector(targetId);
                    if (targetSection) {
                        // LOGICA SMART PER IL BLOG: 
                        // Se clicco "Blog" dal menu e la sezione √® chiusa, la apro automaticamente!
                        if (targetId === '#blog') {
                            const blogGrid = document.getElementById("blogGrid");
                            const toggleBtn = document.getElementById("toggleBlogBtn");
                            // Se √® nascosto (display: none), simulo il click sul tasto "Apri Magazine"
                            if (blogGrid.style.display === "none") {
                                toggleBtn.click();
                            }
                        }

                        // Scrollo alla sezione
                        targetSection.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });

        // --- 13. BACK TO TOP LOGIC ---
        const backToTopBtn = document.getElementById("backToTop");

        window.addEventListener("scroll", () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.add("show");
            } else {
                backToTopBtn.classList.remove("show");
            }
        });

        backToTopBtn.addEventListener("click", (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: "smooth" });
        });

    </script>
</body>
</html>
